<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />

    <title>Bitcoin Dashboard Analizer</title>
    <meta name="description" content="Bitcoin Dashboard Analizer" />
    <link
      rel="icon"
      href="https://bitcoinist.com/wp-content/uploads/2018/06/cropped-Icon-32x32.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      href="https://bitcoinist.com/wp-content/uploads/2018/06/cropped-Icon-192x192.png"
      sizes="192x192"
    />
    <link
      rel="apple-touch-icon"
      href="https://bitcoinist.com/wp-content/uploads/2018/06/cropped-Icon-180x180.png"
    />

    <link
      rel="stylesheet"
      type="text/css"
      href="https://unpkg.com/augmented-ui/augmented.css"
    />
  </head>

  <style type="text/css">
    ::-webkit-scrollbar {
      width: 0.4rem;
    }
    ::-webkit-scrollbar-track {
      background-color: #f7f7f7;
    }
    ::-webkit-scrollbar-thumb {
      background-color: #4285f4;
      border-top-left-radius: 40px;
      border-bottom-left-radius: 40px;
    }

    div.bitcoin-tradingview {
      --aug-border: 5px;
      /* padding: 10px;  mind the gap */
      text-align: center;
      --aug-border-bg: #131722;
      --aug-inset-bg: #131722;
      --aug-bl: 30px;
      --aug-br: 30px;
      --aug-b-height: 30px;
      --aug-b-width: 20%;
    }
    div.google-bitcoin-trends {
      --aug-border: 5px;
      text-align: center;
      --aug-border-bg: #f7f7f7;
      --aug-inset-bg: #f7f7f7;
      --aug-bl: 25px;
      --aug-bl-width: 40%;
      --aug-br: 25px;
      --aug-br-width: 40%;
    }
    div.bitcoin-technical-analysis {
      margin-left: 0.5rem;
      width: fit-content;
      padding: 0 30px 30px 30px; /* mind the gap */
      --aug-inset: 7px;
      --aug-inset-bg: lightgrey;
      --aug-border: 5px;
      --aug-border-bg: lightgrey;
      --aug-border-opacity: 0.5;
      --aug-l-offset: 0px;
      --aug-b-offset: 0px;
      --aug-tl: 10px;
      --aug-tl-height: 0px;
      --aug-tl-width: 0px;
      --aug-tr: 30px;
      --aug-tr-height: 30px;
      --aug-tr-width: 30px;
      --aug-br: 20px;
      --aug-br-height: 0px;
      --aug-br-width: 0px;
      --aug-bl: 30px;
      --aug-bl-height: 30px;
      --aug-bl-width: 30px;
      --aug-t: 0px;
      --aug-t-height: 0px;
      --aug-t-width: 0px;
      --aug-b: 15px;
      --aug-b-height: 15px;
      --aug-b-width: 120px;
      --aug-l: 20px;
      --aug-l-height: 210px;
      --aug-l-width: 20px;
    }

    div.dolar-widget {
      margin-right: 0.5rem;
      width: 400px;
      padding: 0 50px 30px 30px; /* mind the gap */
      --aug-inset: 7px;
      --aug-inset-bg: lightgrey;
      --aug-border: 5px;
      --aug-border-bg: lightgrey;
      --aug-border-opacity: 0.5;
      --aug-r-offset: 0px;
      --aug-b-offset: 0px;
      --aug-tr: 10px;
      --aug-tr-height: 0px;
      --aug-tr-width: 0px;
      --aug-tl: 30px;
      --aug-tl-height: 30px;
      --aug-tl-width: 30px;
      --aug-bl: 20px;
      --aug-bl-height: 0px;
      --aug-bl-width: 0px;
      --aug-br: 30px;
      --aug-br-height: 30px;
      --aug-br-width: 30px;
      --aug-t: 0px;
      --aug-t-height: 0px;
      --aug-t-width: 0px;
      --aug-b: 15px;
      --aug-b-height: 15px;
      --aug-b-width: 120px;
      --aug-r: 20px;
      --aug-r-height: 210px;
      --aug-r-width: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-evenly;
    }
    .dolar-table {
      min-width: 20rem;
      min-height: 4rem;
      text-align: center;
      border: 1px solid black;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.4px;
      font-family: Trebuchet MS, roboto, ubuntu, sans-serif;
      --aug-tl: 30px;
      --aug-tl-height: 30px;
      --aug-tl-width: 30px;
      --aug-br: 30px;
      --aug-br-height: 30px;
      --aug-br-width: 30px;
      --aug-border: 0.1px;
      --aug-border-bg: black;
    }
    .dolar-table-top-row {
      font-weight: 700;
      height: 3rem;
      vertical-align: top;
    }
    .dolar-table-top-row-title {
      width: 50%;
      font-size: 160%;
    }
    .dolar-table-top-row-difference {
      width: 50%;
      font-size: 240%;
    }
    .dolar-table-values-row {
      font-weight: 700;
      font-size: 170%;
    }
    .up {
      color: #2f96f3;
    }
    .down {
      color: #ec5250;
    }
    .equal {
      color: #4ba79a;
    }
    div.section-divider {
      background-color: #131722;
      width: 100%;
      height: 6rem;
      --aug-border: 5px;
      /* padding: 10px;  mind the gap */
      text-align: center;
      --aug-border-bg: #131722;
      --aug-inset-bg: #131722;
      --aug-bl: 30px;
      --aug-br: 30px;
      --aug-b-height: 30px;
      --aug-b-width: 20%;
    }
    div.google-dolar-trends {
      --aug-b-height: 30px;
      --aug-b-width: 50%;
    }
    div.news-section-title {
      color: white;
      height: fit-content;
      text-align: center;
      font-size: 34px;
      letter-spacing: 2px;
      font-family: BlenderProBold, sans-serif;
      font-weight: 700;
      text-transform: uppercase;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    div.news-section-title p {
      margin-top: 0;
      margin-bottom: 0;
    }
    div.news-section-title div {
      padding: 7px;
      --aug-inset-bg: #2f96f3;
      --aug-br: 50px;
      --aug-br-height: 12px;
      --aug-br-width: 25rem;
      width: 32rem;
      margin-bottom: 2rem;
    }
    div.news-section {
      min-height: 2.5rem;
      height: fit-content;
      display: flex;
      flex-wrap: wrap;
      flex-direction: row;
      align-items: center;
      justify-content: space-evenly;
    }
    a.news-article {
      text-decoration: none;
      font-family: BlenderProBold, sans-serif;
      font-weight: 500;
      line-height: normal;
      color: white;
      display: inline-block;
      width: 29%;
      height: fit-content;
      margin: 10px;
      --aug-border: 1px;
      padding: 7px; /* mind the gap */
      text-align: center;
      --aug-border-bg: white;
      --aug-inset-bg: transparent;
      flex-direction: column;
      /* align-items: center;
      justify-content: space-evenly; */
    }
    a.news-article:hover {
      color: black;
      --aug-border-bg: transparent;
      --aug-inset-bg: white;
    }
    div.news-article-first-row {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: flex-start;
    }
    div.news-article-title {
      font-weight: 700;
      font-size: 100%;
      margin-left: 0.4rem;
      text-transform: uppercase;
    }
    img.news-article-image {
      max-height: 5rem;
    }
    div.news-article-second-row {
      margin-top: 0.6rem;
      text-align: center;
    }
    div.news-article-third-row {
      margin-top: 0.6rem;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: flex-start;
      flex-wrap: wrap;
      font-size: 80%;
    }
    div.news-article-related-searchs {
      font-weight: 700;
      font-size: 110%;
      margin-right: 0.4rem;
      padding-top: 0.2rem;
    }
    div.news-article-related-term {
      border: 1px solid #ffffff42;
      padding: 0.2rem;
      margin-right: 0.4rem;
      margin-top: 0.2rem;
    }
    div.news-article-fourth-row {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-evenly;
      font-size: 60%;
      margin-top: 0.6rem;
    }
    .exchange-prices-container {
      display: flex;
      flex-direction: column;
      justify-content: space-evenly;
      font-family: BlenderProBold, sans-serif;
    }
    div.ripio-price,
    div.satoshi-price {
      display: flex;
      flex-direction: column;
      justify-content: space-evenly;
      align-items: center;
      line-height: 3rem;
      font-size: 130%;
      padding: 40px;
      --aug-inset: 7px;
      --aug-inset-bg: lightgrey;
      --aug-border: 5px;
      --aug-border-bg: lightgrey;
      --aug-border-opacity: 0.5;
    }
    div.ripio-price {
      --aug-bl-width: 60%;
      margin-top: 3rem;
    }
    div.satoshi-price {
      --aug-tr-width: 60%;
      margin-bottom: 3rem;
    }
    .exchange-title {
      font-size: 140%;
      font-weight: 700;
      text-transform: uppercase;
    }
    .exchange-price {
      font-weight: 700;
      font-size: 130%;
    }
  </style>

  <body style="background-color: #131722; margin: 0;">
    <!-- TradingView Widget BEGIN -->
    <div
      class="bitcoin-tradingview"
      augmented-ui="br-clip b-clip-x bl-clip exe"
      style="z-index: 1000;"
    >
      <div class="tradingview-widget-container">
        <div id="tradingview_4699e"></div>
        <div class="tradingview-widget-copyright">
          <a
            href="https://es.tradingview.com/symbols/COINBASE-BTCUSD/"
            rel="noopener"
            target="_blank"
            ><span class="blue-text">BTCUSD Gráfico</span></a
          >
          por TradingView
        </div>
        <script
          type="text/javascript"
          src="https://s3.tradingview.com/tv.js"
        ></script>
        <script type="text/javascript">
          new TradingView.widget({
            width: "100%",
            height: 610,
            symbol: "BITSTAMP:BTCUSD",
            interval: "D",
            timezone: "America/Argentina/Buenos_Aires",
            theme: "dark",
            style: "1",
            locale: "es",
            toolbar_bg: "#f1f3f6",
            enable_publishing: false,
            hide_side_toolbar: false,
            save_image: false,
            container_id: "tradingview_4699e",
          });
        </script>
      </div>
    </div>
    <!-- TradingView Widget END -->

    <!-- Bitcoin Global Trends Widget BEGIN -->
    <div
      class="google-bitcoin-trends"
      augmented-ui="bl-clip-x br-clip-x exe"
      style="margin-top: -6rem; z-index: 10;"
    >
      <iframe
        id="trends-widget-1"
        src="https://trends.google.com/trends/explore?date=now%207-d&gprop=news&q=%2Fm%2F05p0rrx"
        width="100%"
        frameborder="0"
        scrolling="0"
        style="height: 100rem;"
      ></iframe>
    </div>
    <!-- Bitcoin Global Trends Widget END -->

    <div
      style="
        display: flex;
        flex-direction: row;
        justify-content: space-between;
      "
    >
      <!-- TradingView Widget BEGIN -->
      <div
        class="bitcoin-technical-analysis"
        augmented-ui="tr-clip l-clip-y bl-clip tl-round br-round b-clip-x exe"
      >
        <div class="tradingview-widget-container">
          <div class="tradingview-widget-container__widget"></div>
          <div class="tradingview-widget-copyright">
            <a
              href="https://es.tradingview.com/symbols/BITSTAMP-BTCUSD/technicals/"
              rel="noopener"
              target="_blank"
              ><span class="blue-text">Análisis técnico de BTCUSD</span></a
            >
            por TradingView
          </div>
          <script
            type="text/javascript"
            src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js"
            async
          >
            {
              "interval": "4h",
              "width": "425",
              "isTransparent": true,
              "height": "450",
              "symbol": "BITSTAMP:BTCUSD",
              "showIntervalTabs": true,
              "locale": "es",
              "colorTheme": "light"
            }
          </script>
        </div>
      </div>
      <!-- TradingView Widget END -->

      <!-- Exchange Prices BEGIN -->
      <div class="exchange-prices-container">
        <div class="ripio-price" augmented-ui="tl-clip tr-clip bl-clip-x exe">
          <div class="exchange-title">Ripio</div>
          <div id="ripio-price" class="exchange-price">⌛</div>
          <div id="ripio-variation" class="exchange-price">⌛</div>
        </div>
        <div class="satoshi-price" augmented-ui="bl-clip br-clip tr-clip-x exe">
          <div class="exchange-title">Satoshi</div>
          <div id="satoshi-price" class="exchange-price">⌛</div>
          <div id="satoshi-variation" class="exchange-price">⌛</div>
        </div>
      </div>

      <!-- Exchange Prices END -->

      <!-- Ambito Financiero Dolar Widget BEGIN -->
      <div
        class="dolar-widget"
        augmented-ui="tl-clip r-clip-y br-clip tr-round bl-round b-clip-x exe"
      >
        <table class="dolar-table" augmented-ui="tl-clip exe">
          <tr class="dolar-table-top-row">
            <td class="dolar-table-top-row-title" style="font-size: 120%;">
              Contado con liquidacion
            </td>
            <td class="dolar-table-top-row-difference" id="dolar-cl-diff">
              ⌛
            </td>
          </tr>
          <tr class="dolar-table-values-row">
            <td id="dolar-cl-value">⌛</td>
          </tr>
          <tr>
            <td>Referencia</td>
          </tr>
        </table>

        <table class="dolar-table">
          <tr class="dolar-table-top-row">
            <td class="dolar-table-top-row-title">
              Blue
            </td>
            <td class="dolar-table-top-row-difference" id="dolar-blue-diff">
              ⌛
            </td>
          </tr>
          <tr class="dolar-table-values-row">
            <td id="dolar-blue-buy">⌛</td>
            <td id="dolar-blue-sell">⌛</td>
          </tr>
          <tr>
            <td>Compra</td>
            <td>Venta</td>
          </tr>
        </table>

        <table class="dolar-table" augmented-ui="br-clip exe">
          <tr class="dolar-table-top-row">
            <td class="dolar-table-top-row-title">
              Oficial
            </td>
            <td class="dolar-table-top-row-difference" id="dolar-of-diff">
              ⌛
            </td>
          </tr>
          <tr class="dolar-table-values-row">
            <td id="dolar-of-buy">⌛</td>
            <td id="dolar-of-sell">⌛</td>
          </tr>
          <tr>
            <td>Compra</td>
            <td>Venta</td>
          </tr>
        </table>
      </div>
      <!-- Ambito Financiero Dolar Widget END -->
    </div>

    <!-- Global Bitcoin News Widget BEGIN -->
    <div class="news-section-title" style="margin-top: 2rem;">
      <p>Noticias sobre el Bitcoin</p>
      <div augmented-ui="br-clip-x exe" style="width: 33rem;"></div>
    </div>
    <div id="bitcoin-news-section" class="news-section"></div>
    <!-- Global Bitcoin News Widget END -->

    <!-- Bitcoin related hashtags Widget BEGIN -->
    <a
      href="https://ritetag.com/best-hashtags-for/bitcoin"
      target="_blank"
      style="
        display: flex;
        justify-content: center;
        color: white;
        text-align: center;
        font-size: 200%;
      "
      >Bitcoin related hashtags</a
    >
    <!-- Bitcoin related hashtags Widget END -->

    <!-- Bitcoin top instagram influencers posts Widget BEGIN -->
    <a
      href="https://ingramer.com/tools/instagram-search/?InstagramSearchForm%5Busername%5D=bitcoin&InstagramSearchForm%5BprofileGender%5D=&InstagramSearchForm%5Bcategory%5D=&InstagramSearchForm%5BfollowersFrom%5D=1000&InstagramSearchForm%5BfollowersTo%5D=10000000000&_pjax=%23account-pjax"
      target="_blank"
      style="
        display: flex;
        justify-content: center;
        color: white;
        text-align: center;
        font-size: 200%;
      "
      >Bitcoin top instagram influencers posts</a
    >
    <!-- Bitcoin top instagram influencers posts Widget END -->

    <!-- Section Divider BEGIN -->
    <div
      class="section-divider"
      style="z-index: 1000;"
      augmented-ui="br-clip b-clip-x bl-clip exe"
    ></div>
    <!-- Section Divider END -->

    <!-- Dolar Argentinian Trends Widget BEGIN -->
    <div
      class="google-dolar-trends"
      style="margin-top: -6rem; z-index: 10;"
      augmented-ui="b-clip-x exe"
    >
      <iframe
        id="trends-widget-1"
        src="https://trends.google.com/trends/explore?date=now%207-d&geo=AR&q=dolar"
        width="100%"
        frameborder="0"
        scrolling="0"
        style="height: 100rem;"
      ></iframe>
    </div>
    <!-- Dolar Argentinian Trends Widget END -->

    <!-- Argentinian Dolar News Widget BEGIN -->
    <div class="news-section-title">
      <p>Noticias sobre el Dólar</p>
      <div augmented-ui="br-clip-x exe"></div>
    </div>
    <div id="dolar-news-section" class="news-section"></div>
    <!-- Argentinian Dolar News Widget END -->

    <!-- TODO floating button go to Top using augmented to generate triangle like the one on Cyberpunk UI -->

    <!-- TODO la hora esta mal, pero no vi donde, preguntar a Papa, dice 2+ horas adelantadas -->

    <!-- Dolar prices updater -->
    <script type="text/javascript">
      const URL_OFICIAL =
        "https://mercados.ambito.com//dolar/oficial/variacion";
      const URL_BLUE = "https://mercados.ambito.com//dolar/informal/variacion";
      const URL_LIQUI = "https://mercados.ambito.com//dolar/cl/variacion";

      const fetchData = (url, options) => {
        return fetch(url, options)
          .then((response) => response.json())
          .catch((error) => {
            console.error(`-- Error al fetchear url: ${url} ---`);
            console.error(error);
            console.trace();
          });
      };

      const updateDolarIndicators = () => {
        console.group("updateDolarIndicators");

        const updateElements = (
          idArray,
          valueArray,
          idDiff,
          classDiff,
          difference
        ) => {
          let element = null;
          for (let index = 0; index < idArray.length; index++) {
            const id = idArray[index];
            const value = valueArray[index];
            element = document.getElementById(id);
            element.innerText = value;

            //Update official dolar tax
            if (id === "dolar-of-sell")
              element.innerText = `${element.innerText} (${
                parseInt(element.innerText) * 1.3
              })`;
          }
          element = document.getElementById(idDiff);
          element.classList.add(classDiff);
          element.innerText = addSymbol(classDiff) + difference;
        };

        const addSymbol = (classDiff) => {
          switch (classDiff) {
            case "up":
              return "+";

            case "down":
              return "";

            default:
              return "=";
          }
        };

        fetchData(URL_OFICIAL).then((data) => {
          console.log(data);
          updateElements(
            ["dolar-of-buy", "dolar-of-sell"],
            [data.compra, data.venta],
            "dolar-of-diff",
            data["class-variacion"],
            data.variacion
          );
        });

        fetchData(URL_LIQUI).then((data) => {
          console.log(data);
          updateElements(
            ["dolar-cl-value"],
            [data.compra],
            "dolar-cl-diff",
            data["class-variacion"],
            data.variacion
          );
        });

        fetchData(URL_BLUE).then((data) => {
          console.log(data);
          updateElements(
            ["dolar-blue-buy", "dolar-blue-sell"],
            [data.compra, data.venta],
            "dolar-blue-diff",
            data["class-variacion"],
            data.variacion
          );
        });

        console.groupEnd();
      };

      updateDolarIndicators();

      window.setInterval(() => {
        updateDolarIndicators();
      }, 5 * 60 * 1000);
    </script>

    <!-- Bitcoin price updated -->
    <script type="text/javascript">
      const PROXY_URL = "https://cors-anywhere.herokuapp.com/";
      const BITCOIN_PRICE_URL =
        "https://www.google.com/async/currency_v2_update?vet=12ahUKEwjT_e-hkJHpAhVtCrkGHZoHCwIQ_sIDMAB6BAgVEAE..i&ei=iEerXtOZBO2U5OUPmo-sEA&yv=3&async=source_amount:1,source_currency:%2Fm%2F05p0rrx,target_currency:%2Fm%2F09nqf,lang:es-419,country:ar,disclaimer_url:https%3A%2F%2Fwww.google.com%2Fintl%2Fes%2Fgooglefinance%2Fdisclaimer%2F,period:1M,interval:86400,_id:currency-v2-updatable_85,_pms:s,_fmt:pc";

      const fetchBitcoinData = () => {
        return (
          fetch(PROXY_URL + BITCOIN_PRICE_URL)
            .then((response) => response.text())
            // .then( data => console.log(data) && data)
            .catch((error) => {
              console.error("-- Error al fetchear precio del bitcoin ---");
              console.error(error);
              console.trace();
            })
        );
      };

      const updateBitcoinPrice = () => {
        fetchBitcoinData().then((fetchedData) => {
          if (!fetchedData) return;
          // console.log("fetchedData: ", fetchedData);
          const textFrom = 'data-exchange-rate="';
          const FROM = fetchedData.indexOf(textFrom) + textFrom.length;
          const UNTIL = fetchedData.indexOf(
            '"><div class="vk_sh c8Zgcf"><span class="DFlfde eNFL1">'
          );
          const bitcoinPriceUSD = fetchedData.substring(FROM, UNTIL);
          if (bitcoinPriceUSD.includes("Not found")) return;
          document.title = `(${bitcoinPriceUSD} USD) Bitcoin Dashboard Analizer`;
        });
      };

      updateBitcoinPrice();

      window.setInterval(() => {
        updateBitcoinPrice();
      }, 2 * 1000);
    </script>

    <!-- Argentinian dolar news updater -->
    <script type="text/javascript">
      const obtainGoogleNews = async (url) => {
        // console.log("- Calling obtainGoogleNews");

        const news = await fetch(PROXY_URL + url)
          .then(function (response) {
            return response.text();
          })
          .then(function (response) {
            const JSON_DATA_START = 5;
            const FIRST = 0;
            response = response.substring(JSON_DATA_START);
            // console.log("After substring oogle response: ", response);
            response = JSON.parse(response).storySummaries.trendingStories;
            // console.log("Post send, google response: ", response);
            return response;
          })
          .catch(function (error) {
            console.error("--- Error Detected ---");
            console.error(error);
            console.trace();
          });

        return news;
      };

      const generateArticleItem = (article) => {
        let imageElement = document.createElement("img");
        imageElement.classList.add("news-article-image");
        imageElement.setAttribute("src", article.imageUrl);
        imageElement.setAttribute("augmented-ui", "tl-clip br-clip exe");

        let titleElement = document.createElement("div");
        titleElement.classList.add("news-article-title");
        titleElement.appendChild(document.createTextNode(article.title));

        let firstRow = document.createElement("div");
        firstRow.classList.add("news-article-first-row");
        firstRow.appendChild(imageElement);
        firstRow.appendChild(titleElement);

        let secondRow = document.createElement("div");
        secondRow.classList.add("news-article-second-row");
        secondRow.appendChild(document.createTextNode(article.snippet));

        let thirdRow = null;
        if (article.relatedTerms && article.relatedTerms.length > 0) {
          let relatedTermsElement = document.createElement("div");
          relatedTermsElement.classList.add("news-article-related-searchs");
          relatedTermsElement.appendChild(
            document.createTextNode("Busquedas relacionadas")
          );

          thirdRow = document.createElement("div");
          thirdRow.classList.add("news-article-third-row");
          thirdRow.appendChild(relatedTermsElement);

          article.relatedTerms.forEach((term) => {
            let termElement = document.createElement("div");
            termElement.classList.add("news-article-related-term");
            termElement.appendChild(document.createTextNode(term));
            thirdRow.appendChild(termElement);
          });
        }

        if (article.searchs) {
          let searchsElement = document.createElement("img");
          searchsElement.appendChild(document.createTextNode(article.searchs));
        }

        let sourceElement = document.createElement("div");
        sourceElement.appendChild(document.createTextNode(article.source));

        let timeElement = document.createElement("div");
        timeElement.appendChild(document.createTextNode(article.time));

        let fourthRow = document.createElement("div");
        fourthRow.classList.add("news-article-fourth-row");
        if (article.searchs) fourthRow.appendChild(searchsElement);
        fourthRow.appendChild(sourceElement);
        fourthRow.appendChild(timeElement);

        let newHtmlElement = document.createElement("a");
        newHtmlElement.classList.add("news-article");
        newHtmlElement.setAttribute("augmented-ui", "tl-clip br-clip exe");
        newHtmlElement.setAttribute("href", article.url);
        newHtmlElement.setAttribute("target", "_blank");
        newHtmlElement.appendChild(firstRow);
        newHtmlElement.appendChild(secondRow);
        thirdRow && newHtmlElement.appendChild(thirdRow);
        newHtmlElement.appendChild(fourthRow);
        return newHtmlElement;
      };

      const addSectionNews = (senctionID, newsArray) => {
        let element = null;
        newsArray.forEach((article) => {
          element = document.getElementById(senctionID);
          element.appendChild(generateArticleItem(article));
        });
      };

      const transformNews = (newsArray, articleValidator) => {
        const IMG_URL_START = 2;
        return newsArray
          .filter((news) => news.articles.some(articleValidator))
          .map((news) => {
            const articleSelected = news.articles.find(articleValidator);
            return {
              imageUrl: "https://" + news.image.imgUrl.substring(IMG_URL_START),
              title: articleSelected.articleTitle,
              url: articleSelected.url,
              source: articleSelected.source,
              time: articleSelected.time,
              snippet: articleSelected.snippet,
              relatedTerms: news.entityNames,
              searchs: news.searchs,
            };
          });
      };

      const updateNews = async (sectionID, url, articleValidator) => {
        // console.log(`calling updateNews ${sectionID}`);
        try {
          let news = await obtainGoogleNews(url);
          if (!news) {
            return;
          }
          news = transformNews(news, articleValidator);
          // console.log("newsTransformed: ", news);
          addSectionNews(sectionID, news);
        } catch (error) {
          console.error("=== Error al updateNews ===");
          console.error(error);
          console.trace();
        }
      };

      const validateArticleHasTerms = (termsArray) => {
        return (article) =>
          termsArray.some((term) => {
            return (
              article.articleTitle.includes(term) ||
              article.url.includes(term) ||
              article.snippet.includes(term)
            );
          });
      };

      const ARG_BUSINESS_NEWS =
        "https://trends.google.com/trends/api/realtimetrends?hl=es-419&tz=180&cat=b&fi=0&fs=0&geo=AR&ri=300&rs=20&sort=0";
      updateNews(
        "dolar-news-section",
        ARG_BUSINESS_NEWS,
        validateArticleHasTerms(["dolar", "dólar"])
      );

      const AUS_BUSINESS_NEWS =
        "https://trends.google.com/trends/api/realtimetrends?hl=es-419&tz=180&cat=b&fi=0&fs=0&geo=AU&ri=300&rs=20&sort=0";
      const CAN_BUSINESS_NEWS =
        "https://trends.google.com/trends/api/realtimetrends?hl=es-419&tz=180&cat=b&fi=0&fs=0&geo=CA&ri=300&rs=20&sort=0";
      const USA_BUSINESS_NEWS =
        "https://trends.google.com/trends/api/realtimetrends?hl=es-419&tz=180&cat=b&fi=0&fs=0&geo=US&ri=300&rs=20&sort=0";
      const MEX_BUSINESS_NEWS =
        "https://trends.google.com/trends/api/realtimetrends?hl=es-419&tz=180&cat=b&fi=0&fs=0&geo=MX&ri=300&rs=20&sort=0";
      const NZ_BUSINESS_NEWS =
        "https://trends.google.com/trends/api/realtimetrends?hl=es-419&tz=180&cat=b&fi=0&fs=0&geo=NZ&ri=300&rs=20&sort=0";
      const UK_BUSINESS_NEWS =
        "https://trends.google.com/trends/api/realtimetrends?hl=es-419&tz=180&cat=b&fi=0&fs=0&geo=GB&ri=300&rs=20&sort=0";

      const bitcoinTerms = ["bitcoin", "btc", "cripto", "crypto", "altcoin"];
      updateNews(
        "bitcoin-news-section",
        ARG_BUSINESS_NEWS,
        validateArticleHasTerms(bitcoinTerms)
      );
      updateNews(
        "bitcoin-news-section",
        AUS_BUSINESS_NEWS,
        validateArticleHasTerms(bitcoinTerms)
      );
      updateNews(
        "bitcoin-news-section",
        CAN_BUSINESS_NEWS,
        validateArticleHasTerms(bitcoinTerms)
      );
      updateNews(
        "bitcoin-news-section",
        USA_BUSINESS_NEWS,
        validateArticleHasTerms(bitcoinTerms)
      );
      updateNews(
        "bitcoin-news-section",
        MEX_BUSINESS_NEWS,
        validateArticleHasTerms(bitcoinTerms)
      );
      updateNews(
        "bitcoin-news-section",
        NZ_BUSINESS_NEWS,
        validateArticleHasTerms(bitcoinTerms)
      );
      updateNews(
        "bitcoin-news-section",
        UK_BUSINESS_NEWS,
        validateArticleHasTerms(bitcoinTerms)
      );
    </script>

    <script type="text/javascript">
      const RIPIO_DATA_URL =
        "https://coinmonitor.info/topars_ar.json?_=1588690143986";
      const SATOSHI_PRICE_URL = "https://api.satoshitango.com/v3/ticker/ARS";
      const SATOSHI_VARIATION_URL = "https://api.satoshitango.com/v3/graph/ARS";
      const RIPIO_LAST_PRICE = "RIPIO_LAST_PRICE";

      const calcVariation = (newPrice) => {
        const lastPrice = window.localStorage.getItem(RIPIO_LAST_PRICE);
        window.localStorage.setItem(RIPIO_LAST_PRICE, newPrice);
        return lastPrice ? (lastPrice / newPrice) * 100 - 100 : 0;
      };

      const classByNumber = (number) => {
        if (number > 0) return "up";
        if (number < 0) return "down";
        return "equal";
      };

      const addNumSymbol = (number) => {
        if (number == 0) return "=";
        if (number > 0) return "+";
        return "";
      };

      const updateExchange = (exchangeData, priceID, variationID) => {
        let element = document.getElementById(priceID);
        element.innerText = `$ ${exchangeData.price.toFixed(0)}`;

        element = document.getElementById(variationID);
        element.classList.add(classByNumber(exchangeData.variation));
        if (exchangeData.variation !== 0)
          element.innerText =
            addNumSymbol(exchangeData.variation) +
            exchangeData.variation.toFixed(2) +
            "%";
      };

      const obtainRipioPrice = (data) => {
        let finder = Object.keys(data).filter(
          (key) =>
            key.match(/exchange_buy_(..|.)$/) && data[key].includes("ripio")
        );
        finder = finder[0];
        finder = finder.replace("exchange", "best");
        return data[finder];
      };

      const updateExchangePrices = () => {
        fetchData(PROXY_URL + RIPIO_DATA_URL).then((response) => {
          let ripioData = {};
          ripioData.price = obtainRipioPrice(response) - 10000;
          ripioData.variation = calcVariation(ripioData.price);
          console.log("ripioData: ", ripioData);
          updateExchange(ripioData, "ripio-price", "ripio-variation");
        });

        fetchData(PROXY_URL + SATOSHI_PRICE_URL).then((response) => {
          let satoshiData = {};
          satoshiData.price = response.data.ticker.BTC.ask;
          console.log("satoshiData: ", satoshiData);
          fetchData(PROXY_URL + SATOSHI_VARIATION_URL).then((data) => {
            satoshiData.variation = data.data.graph.BTC.change;
            console.log("satoshiData.variation: ", satoshiData.variation);
            updateExchange(satoshiData, "satoshi-price", "satoshi-variation");
          });
        });
      };

      //TODO probar pueda obtener datos de URLs
      // document.cookie =
      //   "__stripe_mid=0c7525d1-07f0-4cdb-a144-c302c7419710; driftt_aid=57473e20-bca0-4f67-96e9-fe6bca7544a9; DFTT_END_USER_PREV_BOOTSTRAPPED=true; driftt_wmd=true; __stripe_sid=83610ed9-077b-46b2-bbce-d530ab3443f3; driftt_sid=0e28630e-3fec-425c-b2c5-1d448c4939ff; XSRF-TOKEN=eyJpdiI6IlhhTWUyU3pYMFpDVjZSWk93S2RsRXc9PSIsInZhbHVlIjoiekhMQnoxdStjVjZxOXRRYkpDU3BPWUQ3VDFXajk0SWh5ZU5BRFRKTWFMWG8wMXg3UGhsb2o0aVFDS1RzV1YzNSIsIm1hYyI6IjI3YjNmYmY3ZjAzMTE1MGUyOWExNmFiYmIwZTU5Y2U2MTMzMDVjYTFiOGVmYTFmYmRlOGUwMTcxNDg4ZDhjYzgifQ%3D%3D";
      fetchData(
        PROXY_URL +
          "https://ingramer.com/profile/tradewithraul_/",
        // {
        //   credentials: "same-origin",
        // }
      ).then((response) => {
        console.log("fuente: ", response);
      });

      updateExchangePrices();

      window.setInterval(() => {
        updateExchangePrices();
      }, 10 * 1000);
    </script>
  </body>
</html>
